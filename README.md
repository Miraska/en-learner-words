### Описание проекта

Сервис для изучения слов ( пользовательские словари + публичные словари + карточки + подсказки от LLM)

### Функционал

-   [ ] Пользователи создают свои словари (термин ↔ перевод) и могут делать их публичными; публичные словари доступны другим пользователям для обучения.
-   [ ] Обучение — карточками; количество карточек в сессии выбирает пользователь; слова подбираются случайно (рандом).
-   [ ] Перевод скрыт; пользователь нажимает «показать перевод», затем отмечает результат: «вспомнил», «не вспомнил», «не знал».
-   [ ] Если пользователь нажал **«не знал»**, слово автоматически попадает в отдельный словарь "плохо знаемые" (weak/forgotten).
-   [ ] Кнопка **«подсказка»**: LLM генерирует предложение-подсказку для данного слова.
-   [ ] Бесплатным пользователям — **3 подсказки в день**; дальше — по подписке/кредитам.

### Stack

#### Backend

-   **Node.js** + **Express** — API-сервер.
-   **TypeScript** — типизация.
-   **PostgreSQL** — база данных.
-   **Prisma ORM** — работа с БД.
-   **JWT** — аутентификация.
-   **Bcrypt** — хеширование паролей.

#### Frontend

-   **Next.js** — фреймворк на React для SSR и SEO.
-   **Tailwind CSS** — стилизация.
-   **TypeScript** — типизация.
-   **React Query** — управление данными и кеш.
-   **Framer Motion** — анимация карточек.

#### Hosting

-   **Vercel** — фронтенд.
-   **Railway** — бэкенд и БД.
-   **GitHub** — репозиторий + CI/CD.

### To Do List

1. [x] Инициализировать репозиторий на GitHub, настроить `.gitignore` (node_modules, .env, etc.). **Срок: 1 день**
2. [x] Создать проект Next.js (`npx create-next-app`) с TypeScript, добавить Tailwind CSS, React Query, Framer Motion. **Срок: 2 дня**
3. [x] Настроить backend (Node.js + Express + TypeScript), добавить Prisma (`npm install prisma`) **Срок: 3 дня**
4. [x] Создать `.env` файлы для frontend и backend (DATABASE_URL, JWT_SECRET, etc.). **Срок: 1 день**
5. [x] Применить Prisma-схему (из предыдущего ответа), сгенерировать миграции (`npx prisma migrate dev`). **Срок: 2 дня**
6. [x] Реализовать роуты для регистрации/логина (POST /auth/register, POST /auth/login) с JWT и Bcrypt. **Срок: 3 дня**
7. [x] Добавить middleware для проверки JWT на защищённых роутах. **Срок: 1 день**
8. [x] Реализовать CRUD для словарей (POST/GET/PUT/DELETE /dictionaries) с учётом `public` и `createdById`. **Срок: 4 дня**
9. [x] Реализовать CRUD для слов (POST/GET/PUT/DELETE /words) с валидацией уникальности (`@unique([word, dictionaryId])`). **Срок: 4 дня**
10. [x] Реализовать роут для сессий обучения (POST /sessions, GET /sessions/:userId) для трекинга прогресса. **Срок: 3 дня**
11. [x] Реализовать роут для подсказок (POST /hints) с интеграцией LLM (напр., `@langchain/core` или `openai-node`). **Срок: 4 дня**
12. [x] Добавить rate limiting (express-rate-limit) для API, особенно для /hints. **Срок: 2 дня**
13. [x] Реализовать трекинг подсказок (HintUsage) с лимитом 3/день, используя cron-job (node-cron). **Срок: 3 дня**
14. [x] Создать главную страницу с навигацией (Home, My Dictionaries, Public Dictionaries, Profile). **Срок: 3 дня**
15. [x] Реализовать страницу авторизации/регистрации с формами (React Query для POST /auth/\*). **Срок: 3 дня**
16. [x] Создать страницу для управления словарями (создание, редактирование, удаление, toggle public). **Срок: 4 дня**
17. [x] Реализовать страницу публичных словарей с фильтрацией по языкам и сортировкой по `likes`. **Срок: 4 дня**
18. [ ] Создать компонент карточек обучения (Framer Motion для анимаций, React Query для GET /words). **Срок: 5 дней**
19. [ ] Добавить кнопки "Показать перевод", "Вспомнил", "Не вспомнил", "Не знал" с обновлением `UserWord` и `Session`. **Срок: 3 дня**
20. [ ] Реализовать кнопку "Подсказка" с запросом к /hints, отображением предложения и учётом лимитов. **Срок: 3 дня**
21. [ ] Создать страницу профиля с отображением `UserStats` (learnedCount, streak, totalSessions). **Срок: 3 дня**
22. [ ] Настроить ESLint/Prettier для frontend и backend, добавить husky для pre-commit. **Срок: 2 дня**
23. [ ] Написать unit-тесты для ключевых API-роутов (Jest, supertest). **Срок: 4 дня**
24. [ ] Провести тестирование UI (Cypress или Playwright) для карточек и авторизации. **Срок: 4 дня**
25. [ ] Оптимизировать производительность: добавить пагинацию для словарей/слов, кэширование в React Query. **Срок: 3 дня**
26. [ ] Реализовать алгоритм spaced repetition в backend (на основе `UserWord.recallCount` и `lastReviewed`). **Срок: 5 дней**
27. [ ] Добавить поддержку транскрипций и exampleSentence в UI карточек. **Срок: 3 дня**
28. [ ] Реализовать поиск слов по подстроке (с `pg_trgm`) в публичных словарях. **Срок: 3 дня**
29. [ ] Проверить SEO (meta tags, sitemap) на Vercel для публичных словарей. **Срок: 2 дня**
30. [ ] Задеплоить финальную версию, протестировать на проде (Vercel + Railway). **Срок: 3 дня**
31. [ ] Написать README с инструкциями по запуску и использованию. **Срок: 2 дня**

### To Do List для внедрения платных функций

1. [ ] Обновить модель `User` в Prisma-схеме, убедившись, что поле `subscriptionTier` (String, default "free") присутствует для отслеживания статуса подписки (free, premium). **Срок: 1 день**
2. [ ] Применить миграции Prisma (`npx prisma migrate dev`) для обновления схемы User. **Срок: 1 день**
3. [ ] Модифицировать роут на backend (POST /hints), чтобы разрешать неограниченные подсказки для `subscriptionTier: "premium"`. **Срок: 2 дня**
4. [ ] Зарегистрироваться как самозанятый в налоговой (если ещё не сделано) и настроить профиль Boosty для приёма платежей. **Срок: 3 дня**
5. [ ] Создать страницу на Boosty с уровнями подписки (например, "Premium" — неограниченные подсказки). **Срок: 2 дня**
6. [ ] Создать модель `Subscription` в Prisma (userId, boostyLevel, expiresAt) для отслеживания подписок Boosty. **Срок: 2 дня**
7. [ ] Реализовать роут на backend (POST /boosty/webhook) для обработки webhook’ов от Boosty о новых/истёкших подписках. **Срок: 3 дня**
8. [ ] Реализовать cron-job (node-cron) для проверки истёкших подписок (`Subscription.expiresAt`) и обновления `User.subscriptionTier` на "free". **Срок: 2 дня**
9. [ ] Создать страницу на frontend (Next.js) с кнопкой "Оформить подписку" и редиректом на Boosty. **Срок: 3 дня**
10. [ ] Добавить UI-компонент (Tailwind CSS) на странице профиля для отображения статуса подписки (`subscriptionTier`). **Срок: 2 дня**
11. [ ] Реализовать уведомление в UI (React Query) о лимите подсказок для бесплатных пользователей с предложением оформить подписку. **Срок: 2 дня**
12. [ ] Написать unit-тесты для роута /boosty/webhook (Jest, supertest). **Срок: 2 дня**
13. [ ] Протестировать интеграцию Boosty: вручную проверить webhook’ы и обновление `subscriptionTier`. **Срок: 2 дня**
14. [ ] Добавить в UI пояснение о подписке (3 подсказки/день бесплатно, неограниченно для Premium через Boosty). **Срок: 1 день**
15. [ ] Проверить соответствие самозанятости: настроить отчётность для налоговой по платежам Boosty. **Срок: 2 дня**
16. [ ] Обновить README проекта с описанием монетизации и инструкциями по настройке Boosty. **Срок: 1 день**
